<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sistema de Videovigilancia from Scratch</title>
    <meta name="description" content="">
    <meta name="author" content="Jesús Torres">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="..">Sistema de Videovigilancia from Scratch</a>

        <div class="nav-collapse">
        <ul class="nav">
                    
                            <li><a href="../pages/acerca-de.html">Acerca de...</a></li>
                        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
            <div class='article'>
        <div class="content-title">
            <h1>Incorporar funcionalidad a Yocto mediante capas. Un ejemplo con Qt</h1>
            mié 30 enero 2013

by <a class="url fn" href="../author/jesus-torres.html" rel="author">Jesús Torres</a>
 


        </div>
	
        <div><p>Una vez hemos <a href="../crea-tu-propia-distro-de-linux-con-yocto.html">construido nuestra distribución</a> podemos incorporarle nuevas funcionalidades a través de <strong>capas</strong>.</p>
<p>Las capas no son más que grupos de recetas, cada una de las cuales contiene
información sobre como construir un componente de software concreto, de manera
que trabajando juntos se incorpora la funcionalidad deseada. Para nuestro ejemplo
añadiremos a nuestra distribución el <em>framework</em> de desarrollo de aplicaciones <a href="../proyecto-qt-framework-de-desarrollo-de-aplicaciones.html">Qt</a>.</p>
<p>La versión actual del proyecto <a href="../yocto-poky-y-bitbake.html" title="Yocto, Poky y BitBake">Yocto</a> ya provee de la capa <strong>meta-qt</strong> que
permite incluir <a href="http://doc.qt.digia.com/main-snapshot/qt-embedded-linux.html">Qt 4.8 Embedded for Linux</a> en nuestra distribución.</p>
<p>Sin embargo en la versión 5 se actualiza y reemplaza <em><a href="../proyecto-qt-framework-de-desarrollo-de-aplicaciones.html" title="Proyecto Qt. Framework de desarrollo de aplicaciones">Qt</a> for Embedded Linux</em> con un
nuevo componente denominado <a href="http://qt-project.org/wiki/Qt-Platform-Abstraction" title="Qt Platform Abstraction">QPA</a> o <em>Qt Platform Abstraction</em>. La nueva arquitectura
es más simple, facilita la integración de <a href="../proyecto-qt-framework-de-desarrollo-de-aplicaciones.html" title="Proyecto Qt. Framework de desarrollo de aplicaciones">Qt</a> con cualquier sistema de ventanas
(suprime el gestor de ventanas QWS incluido en <em><a href="../proyecto-qt-framework-de-desarrollo-de-aplicaciones.html" title="Proyecto Qt. Framework de desarrollo de aplicaciones">Qt</a> for Embedded Linux</em>) y la
inclusión de contenidos basados en <a href="http://es.wikipedia.org/wiki/OpenGL" title="OpenGL">OpenGL</a>. Por eso la 5 será la versión que
utilizaremos en nuestro proyecto.</p>
<p>En <a href="http://qt-project.org/videos/watch/qpa-the-qt-platform-abstraction">una charla de Thomas Senyk</a>
se desarrollan mucho mejor todas estas diferencias y se justifican las ventajas
de QPA respecto a su predecesor.</p>
<h2>Incorporar Qt</h2>
<p>Incorporar <a href="../proyecto-qt-framework-de-desarrollo-de-aplicaciones.html" title="Proyecto Qt. Framework de desarrollo de aplicaciones">Qt</a> es muy similar a hacerlo para <a href="filename|/Desarrollo/crear-una-distro-linux-con-yocto.md">el soporte de Raspberry Pi</a> a nuestra distribución:</p>
<ol>
<li>
<p>Clonar localmente el repositorio <strong>meta-qt5</strong> fuera del directorio <code>raspberry-pi-build</code>.</p>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">git</span> <span class="n">clone</span> <span class="n">https:</span><span class="sr">//gi</span><span class="n">thub</span><span class="o">.</span><span class="n">com</span><span class="sr">/meta-qt5/m</span><span class="n">eta</span><span class="o">-</span><span class="n">qt5</span><span class="o">.</span><span class="n">git</span>
</pre></div>


</li>
<li>
<p>Buscar la variable <code>BBLAYERS</code> en <code>raspberry-pi-build/conf/bblayers.conf</code> y añadir
al final la ruta hasta el repositorio de la capa <strong>meta-qt5</strong> para incluirla
en el proceso de construcción. Por ejemplo:</p>
<div class="codehilite"><pre><span class="n">BBLAYERS</span> <span class="p">?</span><span class="o">=</span> <span class="s">&quot; \</span>
<span class="s">  /home/usuario/poky-danny-8.0/meta \</span>
<span class="s">  /home/usuario/poky-danny-8.0/meta-yocto \</span>
<span class="s">  /home/usuario/poky-danny-8.0/meta-yocto-bsp \</span>
<span class="s">  /home/usuario/meta-raspberry-pi \</span>
<span class="s">  /home/usuario/meta-qt5 \</span>
<span class="s">&quot;</span>
</pre></div>


</li>
<li>
<p>Construir la imagen:</p>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">cd</span> <span class="n">raspberry</span><span class="o">-</span><span class="n">pi</span><span class="o">-</span><span class="n">build</span>
<span class="nv">$</span> <span class="nv">bitbake</span> <span class="n">rpi</span><span class="o">-</span><span class="n">basic</span><span class="o">-</span><span class="n">image</span>
</pre></div>


<p>Esta imagen incluye un servidor <strong>SSH</strong> y un <em>splash</em> de Raspberry Pi durante el arranque.
Mientras que la imagen alternativa <code>rpi-hwup-image</code> no contiene ninguna de las dos cosas.</p>
</li>
<li>
<p>Transferir la imagen construida a la tarjeta SD.</p>
<div class="codehilite"><pre><span class="nv">$</span> <span class="nv">sudo</span> <span class="n">dd</span> <span class="k">if</span><span class="o">=</span><span class="n">tmp</span><span class="sr">/deploy/im</span><span class="n">ages</span><span class="sr">/rpi-basic-image-raspberrypi.rpi-sdimg of=/</span><span class="n">ruta</span><span class="sr">/a/</span><span class="n">la</span><span class="o">/</span><span class="n">sd</span>
</pre></div>


<p>y probarla en el dispositivo.</p>
</li>
</ol>
<h2>Referencias</h2>
<ol>
<li><a href="http://www.yoctoproject.org/docs/1.0/yocto-quick-start/yocto-project-qs.html">Yocto Project Quick Start</a>.</li>
</ol></div>
	
        <hr>
    	   
        <h2>Comentarios</h2>
		    </div>
        </div>
        
        <div class="span3">

            
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Sitio
                </li>
            
                <li><a href="../archives.html">Archivos</a>
                <li><a href="../tags.html">Etiquetas</a>
                <li><a href="http://ull-etsii-sistemas-operativos.github.com/videovigilancia-blog/feeds/atom.xml" rel="alternate">Fuente Atom</a></li>
                                <li><a href="http://ull-etsii-sistemas-operativos.github.com/videovigilancia-blog/feeds/rss.xml" rel="alternate">Fuente RSS</a></li>
                            </ul>
            </div>


                        <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categorias
                </li>
                
                                <li><a href="../category/desarrollo.html">Desarrollo</a></li>
                                <li><a href="../category/hardware.html">Hardware</a></li>
                                <li><a href="../category/overviews.html">Overviews</a></li>
                                   
            </ul>
            </div>
            

            

                        <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                                <li><a href="http://github.com/ull-etsii-sistemas-operativos/">github</a></li>
                                <li><a href="http://plus.google.com/u/0/communities/112085352199958768374">google+</a></li>
                                <li><a href="http://ull-etsii-sistemas-operativos.github.com/videovigilancia-blog/feeds/atom.xml">atom</a></li>
                                <li><a href="http://ull-etsii-sistemas-operativos.github.com/videovigilancia-blog/feeds/rss.xml">rss</a></li>
                            </ul>
            </div>
            </div>
            
        </div>  
    </div>     </div> 
<footer>
<br />
<p><a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.es"><img alt="Licencia Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/80x15.png" /></a><br />Este obra está bajo una <a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.es">Licencia Creative Commons Atribución 3.0 Unported</a>.</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-collapse.js"></script>
 
</body>
</html>